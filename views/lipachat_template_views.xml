<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Template Form View -->
        <record id="view_lipachat_template_form" model="ir.ui.view">
            <field name="name">lipachat.template.form</field>
            <field name="model">lipachat.template</field>
            <field name="arch" type="xml">
                <form string="WhatsApp Template">
                    <header>
                        <button name="create_template" string="Create Template" type="object" class="btn-primary"/>
                        <field name="status" widget="statusbar" statusbar_visible="draft,submitted,approved,rejected"/>
                    </header>
                    <sheet>
                        <!-- First row with Template Name, Category, and Language -->
                        <group class="flex-container">
                            <field name="name" class="flex-item"/>
                            <field name="category" class="flex-item"/>
                            <field name="language" class="flex-item"/>
                        </group>

                        <!-- Phone number field with input type=tel -->
                        <group string="WABA Phone Number" class="mt16">
                            <field name="phone_number" widget="phone" placeholder="Example: 254110090747"/>
                        </group>
                        
                        <!-- Header Section -->
                        <group string="Header" class="mt16">
                            <field name="header_type"/>
                            <field name="header_text" invisible="header_type != 'TEXT'"/>
                            <field name="header_media" invisible="header_type == 'TEXT'" 
                                   filename="header_media_filename"/>
                        </group>
                        
                        <!-- Body Section -->
                        <group string="Body" class="mt16">
                            <field name="body_text" nolabel="1" placeholder="Enter your message..."/>
                        </group>
                        
                        <!-- Footer Section -->
                        <group string="Footer (Optional)" class="mt16">
                            <field name="footer_text" placeholder="Enter footer text..."/>
                        </group>
                        
                        <!-- Buttons Section -->
                        <group string="Buttons (Optional, max 3)" class="mt16">
                            <h2 class="button-count-titles">Button 1</h2>
                            <group>
                               <field name="button_1_type"/>
                                <field name="button_1_text" placeholder="Button text"/> 
                                <field name="button_1_url" invisible="button_1_type != 'URL'" 
                                       placeholder="https://example.com"/>
                                <field name="button_1_phone" invisible="button_1_type != 'PHONE_NUMBER'" 
                                       widget="phone" placeholder="254712345678"/>
                            </group>
                            
                            <h2 class="button-count-titles">Button 2</h2>
                            <group>
                                <field name="button_2_type"/>
                                <field name="button_2_text" placeholder="Button text"/>
                                <field name="button_2_url" invisible="button_2_type != 'URL'" 
                                       placeholder="https://example.com"/>
                                <field name="button_2_phone" invisible="button_2_type != 'PHONE_NUMBER'" 
                                       widget="phone" placeholder="254712345678"/>
                            </group>
                            
                            <h2 class="button-count-titles">Button 3</h2>
                            <group>
                                <field name="button_3_type"/>
                                <field name="button_3_text" placeholder="Button text"/>
                                <field name="button_3_url" invisible="button_3_type != 'URL'" 
                                       placeholder="https://example.com"/>
                                <field name="button_3_phone" invisible="button_3_type != 'PHONE_NUMBER'" 
                                       widget="phone" placeholder="254712345678"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Template Tree View -->
        <record id="view_lipachat_template_tree" model="ir.ui.view">
            <field name="name">lipachat.template.tree</field>
            <field name="model">lipachat.template</field>
            <field name="arch" type="xml">
                <tree string="WhatsApp Templates" decoration-success="status=='approved'" decoration-warning="status=='submitted'">
                    <field name="name"/>
                    <field name="category"/>
                    <field name="language"/>
                    <field name="phone_number"/>
                    <field name="status"/>
                </tree>
            </field>
        </record>

        <!-- Template Action -->
        <record id="action_lipachat_template" model="ir.actions.act_window">
            <field name="name">WhatsApp Templates</field>
            <field name="res_model">lipachat.template</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create your first WhatsApp template
                </p>
                <p>
                    Templates allow you to send pre-approved messages to customers.
                </p>
            </field>
        </record>
    </data>
</odoo>